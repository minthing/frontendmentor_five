<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="reset.css">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Red+Hat+Text:wght@400;500;700&display=swap" rel="stylesheet">
  <link
  rel="stylesheet"
  href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
  integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
  crossorigin="anonymous"/>
  <title>Frontend Mentor | Launch seconddown timer</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet 👍 -->
  <style>
    body{
      position: relative;
      /* background-image: url("./images/bg-stars.svg"), url("./images/pattern-hills.svg");
      background-position: center bottom, center bottom;
      background-repeat: repeat, no-repeat;
      background-size: contain; */
      /* contain : 배경을 사용하는 요소를 벗어나지 않는 최대 크기로 이미지를 확대 또는 축소합니다. 가로 세로 비율을 유지합니다. */
      background-color: hsl(234, 17%, 12%);
      text-transform: uppercase;font-family: 'Red Hat Text', sans-serif;font-weight: 700;
    }
    h1{text-transform: uppercase;font-family: 'Red Hat Text', sans-serif;font-weight: 700;color:hsl(0, 0%, 100%);font-size: 16px;letter-spacing:2px;text-align: center;}
    .wrap_cont{
      padding:130px 24px 72px 24px;
      min-height: 100vh;
      position: relative;
      align-items: center;
      z-index: 1;
      box-sizing: border-box;
      color: hsl(237, 18%, 59%)
    }
    .wrap_cont::after{
      content: "";
      pointer-events: none;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: no-repeat bottom center url(images/pattern-hills.svg), no-repeat url(images/bg-stars.svg);
      background-size: 100% 25%, 100% 70%;
      z-index: -1;
      margin: 0;
      padding: 0;
    }
    .time_table{
      display: flex;
      justify-content: center;
      margin-top: 45px;
      margin-bottom: 33vh;
    }
    .item_card{
      height: 28vh;
      width: 14%;
      color: hsl(345, 95%, 68%);
      max-height: 175px;
      max-width: 165px;
      perspective: 1000px;
    }
    .item_card:not(:last-child){
      margin-right:3%;
    }
    .upper_card{
      background:#2c2c44;
      height: 40%;
      position: relative;
      overflow: hidden;
      border-radius: 10px 10px 0 0;
      transition: transform 1s;
      transform-style: preserve-3d;
      transform-origin: bottom;
      z-index: 101;
      color: #d53c67;
      border-bottom: 1px solid hsl(234, 17%, 12%);
      box-sizing: border-box;
    }

    .upper_card.active{
      animation: flip 1s cubic-bezier(0.75, 0, 0.23, 1) infinite;
    }
/* 
    .lower_card.active{
      animation: flip_under 1s cubic-bezier(0.75, 0, 0.23, 1) infinite;
    } */

    .lower_card{
      position: relative;
      background:rgb(52 54 79);
      height: 80%;
      margin-top: -70px;
      position: relative;
      border-radius: 10px 10px 10px 10px;
      z-index: 100;
      color: #ff5c89;
    }

    .upper_card span, .lower_card span{
      position: absolute;
      top: 0;
      left: 50%;
      -webkit-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
      line-height: 1;
      font-size: 5rem;
    }
    .upper_card span{
      top: 100%;
      transform-style: preserve-3d;
    }
    .lower_card span{
      top: 50%;
    }
    .item_card h2{
      text-align: center;
      line-height: 45px;
      color: hsl(237, 18%, 59%);
      font-weight: 700;
      font-size: 14px;
    }
    .social{
      position: absolute;
      left: 50%;
      bottom: 10%;
      transform: translate(-50%, 0);
    }
    .social i{
      color: hsl(237, 18%, 59%);
      font-size: 20px;
    }
    .social a:not(:last-child){
      margin-right: 10px;
    }
    .social i:hover{
      color: hsl(345, 95%, 68%)
    }
    .attribution { font-size: 11px; text-align: center; position: absolute; bottom:0;text-align: center;}
    .attribution a { color: hsl(228, 45%, 44%); }

    @keyframes flip {
     0% { 
       transform: rotateX(0);
       z-index: 102;
       opacity:1
     }
     70%{
      transform: rotateX(-126deg);
       z-index: 102;
       opacity: 0.99;
     }
     94%{
      transform: rotateX(-169deg);
       z-index: 102;
       opacity: 0.5;
     }
     95%{
      transform: rotateX(-171deg);
       z-index: 101;
       opacity: 0.2;
     }
     100% { 
      transform: rotateX(-180deg);
      z-index: 99;
      opacity: 0;
     }
    }

    @keyframes flip_under {
     0% { 
      background:rgb(52 54 79);
     }
     60%{
      background:rgb(52 54 79);
     }
     100% { 
      background:#2c2c44;
     }
    }

    @media screen and (max-width: 850px) {
      .wrap_cont{
        padding: 150px 5% 72px 5%;
      }
      .item_card{
        height: 175px;
        width: 25%;
        max-height: 75px;
        max-width: 100px;;
      }
      .item_card:not(:last-child){
        margin-right:2%;
      }
      .upper_card span, .lower_card span{
        font-size: 2.5rem;
      }
      .wrap_cont:after{
        background-size: 165% 33%, 250% 51%;
      }
      .lower_card{
        margin-top: -30%;
      }
    }
    @media screen and (max-width:320px) {
      .lower_card{
        margin-top: -43px;
      }
    }
    @media screen and (max-width:375px) {
      .lower_card{
        margin-top: -38px;
      }
    }
    @media screen and (max-width:425px) {
      .lower_card{
        margin-top: -30px;
      }
    }
  </style>
</head>
<body>
<main class="wrap_cont">
  <h1>We're launching soon</h1>
  <section class="time_table">
    <div class="item_card">
      <div class="upper_card">
        <span class="day">08</span>
      </div>
      <div class="lower_card">
        <span class="day">08</span>
      </div>
      <h2>Days</h2>
    </div>
    <div class="item_card">
      <div class="upper_card">
        <span class="hour">24</span>
      </div>
      <div class="lower_card">
        <span class="hour">24</span>
      </div>
      <h2>Hours</h2>
    </div>
    <div class="item_card">
      <div class="upper_card">
        <span class="min">60</span>
      </div>
      <div class="lower_card">
        <span class="min">60</span>
      </div>
      <h2>Miniutes</h2>
    </div>
    <div class="item_card">
      <div class="upper_card">
        <span class="sec">60</span>
      </div>
      <div class="lower_card">
        <span class="sec">60</span>
      </div>
      <h2>Seconds</h2>
    </div>
  </section>
  <div class="social">
    <a href="#" aria-label="facebook">
      <i class="fab fa-facebook-square"></i>
    </a>
    <a href="#" aria-label="pinterest">
      <i class="fab fa-pinterest"></i>
    </a>
    <a href="#" aria-label="instagram">
      <i class="fab fa-instagram"></i>
    </a>
  </div>
</main>
<script>
  console.log("hello");

  const section = document.getElementsByTagName('section')[0];
  let count = 0;

  function changeTime(timeList, time, count){
    if(count != 0){
        timeList[0].parentNode.classList.add('active');
      }
    for(let i = 0; i < 2; i++){
      timeList[i].innerHTML = time.toString().padStart(2, '0');
    }
  }

  function removeClass(timeList){
    timeList[0].parentNode.classList.remove('active');
  }

  function getDate(){
    // 참고 : https://velog.io/@dev-hannahk/js-d-day
  const setDate = new Date("2021-09-01T00:00:00+0900");
  const setDateYear = setDate.getFullYear();
  const setDateMonth = setDate.getMonth() + 1; // getMonth 메서드는 0부터 시작함
  const setDateDay = setDate.getDate();
  const now = new Date();

  const distance = setDate.getTime() - now.getTime(); //second 단위로 변환 후 뺌

  const seconds = Math.floor((distance % (1000*60))/1000);
  const day = Math.floor(distance/(1000*60*60*24));
  const hours = Math.floor((distance % (1000*60*60*24))/(1000*60*60));
  const minutes = Math.floor((distance % (1000*60*60))/(1000*60));

  const dayList = document.querySelectorAll('.day');
  const hourList = document.querySelectorAll('.hour');
  const minList = document.querySelectorAll('.min');
  const secList = document.querySelectorAll('.sec');

  // const observer = new MutationObserver(function(mutations){}); -> 해당 함수 사용 불가능해 보임...

  if(count <= 0){
    changeTime(secList, seconds, count);
    changeTime(minList, minutes, count);
    changeTime(hourList, hours, count);
    changeTime(dayList, day, count);
  }else{
    changeTime(secList, seconds, count);
    if(seconds-1 == 0){
      changeTime(minList, minutes, count);
    }else{
      removeClass(minList);
    }
    if(minutes-1 == 0){
      changeTime(hourList, hours, count);
    }else{
      removeClass(hourList);
    }
    if(hours-1 == 0){
      changeTime(dayList, day, count);
    }else{
      removeClass(dayList)
    }
  }
  count ++
}

  const init = () => {
    getDate();
    setInterval(getDate, 1000);
  }

  init();

</script>
</body>
</html>